sudo: required
services:
- docker
before_install:
- docker login -u $DOCKER_USER -p $DOCKER_PASS
script:
- docker-compose build verifyclient
- docker-compose run --rm verifyclient sh -c "yarn && yarn test"
env:
  global:
  - secure: ffRFQPaZAfMPRGUp01lEyiGGGBxl0dj8buMyVTuqGS6CkXTWkAFRYligVHYo4n0MCZ2T4SAOjDnkl2Ze/+u2Ze/Gzah60r2GRbdmhlMBdG/mn8AeZYZIhkeP2PuBl9Exf9jcwTv8Na8RYMekky7Z35o7nNOEwYr1P+ch3ZS5Q6TzAE1we6X0HN28dd3yh3+iAhJTq4ZimEgM8KXoWp1Q7oyHBsOjiPmXD34iVcC6YZm6pVND0X8rMqtQX0o6c/0XSdkhPTYA2FvhQVgxJ9MxoJVfmZ8huDD42CF5T7e7qP7+WOGMdRDAqQX/FfKReRoENgpFxWOaxzDWx87ZtIwQNoMcU73HiLspaizsParFb8c9GeTiBHCpxx+A5cOrolcIcjA66y5DxYYWiHabB4GQADr5FB7UFZKXqfew2+g3bPWBLiTJCcYp+7S/6eXu4j4bBYYvYUpaieVA4y2Te16CMpkkRa1ClJSyNtwXF42H2Q4NgHH5AUY7yrjwIifY8QQm2AsP5EcRsdPOJqcAPENcxkdaXSARZgUvcu3kZe9Zt7pO/cltsQujFNIdDquOpUKN1dGP5p7DUFypoaUmK9f3PfrdRciNb5Rbwh6ma8HmU45CdRyUfd31NwpaWlt/Chkj0aNvmk81jl3+00HuQlUrLbuEW/DkX3iiE7J1atNHixo=
  - secure: DFjtxgk4ovRpRQluXWri+dbW13HQzka/6tOrzCdjw1CqKLNcIUiPgnNBJCMbFlKEhCfl42cZ72lsuuc6wdWRZQMKtqG5igkWmNpZ11zj1KMIU3xM1buvLI1HQFfL4u0yiKG6jJpV3stGJW6GoVZ12FD0IRMtq/kCF8/7jNzQ4fz1L0U+snvHnCk0sywKunlKz10nHXVkci5NNS93on6LO+IvFkyod3QyWtRPG5GYcU9HmeCOKOsvE3gWipyRdLJJQ+vfUOnDny5xYhyKwosXUbOmVwkmDqzW/t4Whc0aDkbubwl6bSTS6YpUte1jZ45k+uQ4MPvUDdBjby9USiGsD3cyuaEeaZPBWsMXkn48mtvfwLh0kZ7NZxDXejzBVUmmbFC7LNUMw9X4Si4WXmSpsYmxHAaFN510J10lT2dkmge0Ft2ureNnt8LEIvAWU5jCg5vks4Ljts82rVWos7yCd0lcjVCRbSzYU3+Fq6Ga2e5qUPxtsV20IG6dazS2oikSRCoJdq8/zkbcKnPcdJqVVCoENvj3RHaN7ni/JwgQU1QkwhtEr8lUgS7PlPZYKUMowgO93EMnMmUwv+fshSjQykxU1VpBW+VjsuAIXAUnX3pOIHiOhgAx1811eIC/6KJbNddFV/g87OQihM6kEj4RPD7gC0XSN1Z4xWoEqCr997g=
notifications:
  slack:
    secure: PAiNCZf1uGgka60kL2tuOmjaVjDA9W+NV+y3xIWH7SUisHbCyuwuTSHD3rwoxqH8T0CdbS/XvJYVVmqhLByv8AJh5BFcbgjvETZjrtPgkzfE6/mBsCKJFABvflG2p9bU0KSz2o68CuVQsQ09Z+0msLC7g0nZLeWqMBp3RLBVyGK6zCVBLS9A97Jo7E30q427jCQ/pRlGan7euHxRaxTzzhTW9plYOGU/a8QgVJJHrIb/BmB7pDapehBN5h8bPai9YV740DfzSlqdqHdT6HznluCJ/5iamE17Ovgjnv24Y2SrA14fbNcpeI5gYItVWtMbNv74mSyiHbMzqj19FI8gvURDi4asRD/dQqz/rmkiR6/xdTzdr/e/UhpZ8me8SQOC6BUITBrO78NINfo+pK+UiJJcb5DWVNOMwsfn9lAgtkCrXgC/uvF05CPx+3ENLRXiOqsn5BUbmIaqnE2Rz8/Avjoey8XgPO5ri3bMIgm18FPq2qvyCQMe107ozLhOIf/iNirHB6u0+A5EkVblMhaQLUZsGUJFdDOmIjBA/ByuCstPFdXcCsujnAjLMVF3/088CEoXlgrmn98q6+8RLm8mnLBH5ryzooqNm30AKjuVOLEMPLTBoKRBK//2573fq7pTCVoLvHO2JckphrDZixUi1Zwqcj5JWjp/iBlAbfPzkVA=
before_deploy: docker-compose run --rm verifyclient sh -c 'yarn build'
deploy:
  provider: npm
  email: aleksand-isaev@yandex.ru
  api_key:
    secure: KCh+EhZjqnedYgB2U+FOWsCJJgXEGoF3ZnYghqd4C+RAeYEuPQPwEYRlKonLbzoiXIY3VB2Nl1Qf9+//rp+V3HkyjYH6dqLITGubDhLydIsJomS6BMVAuQcYoODZs6SYuL5aG8M/jK1k6pDCmWSZGcIkwB7uFhRI0K4A6CCws2Ev2k43+onAwMop2tj1naruAdUVqT+nGEmyakCozls6Inz6m/Cp1SB4f8Y2kQKaj58V5RNRxwlBii1Ao6Q2piNmbGi2jXc44fLVrH0nh03YFpYQQc+uvdY4gaHY11hItOABxVY7Yf3/iRkNkZT93qjpgpDOJKaGi1L/9+jYCC0J3DGPrr3ZU8PwXRC96D6TapmUKn6jVRxMIQ17wfjm0jFcB7+FUNghXvffe8x5z48t8LmS+QV78v5/w4qqF1T6OWLX9Ou7e/5N3hrxDqfMRpPkSm62uk0j8mzJIk4UZJjfgzfNTDSW89SJGw4igNG50vequS5+MqmmytuI3r3GrjapirFkKxIOQwcmIbCgJ2KsiDyAcEu+9EyO4Th44mKi/PaOHAeihFAQkHmqZGkkk1bTigECNJ1UjwzUv6zg1H3OWBJkuwkF8MQPpx3n7mtlXvOKDbqHLHMSAY3TJGQX/XJV8l7opnSGccFhzmwKcY7wIM8nRJrdX/0WASAOYAjc+ic=
  on:
    tags: true
    repo: JincorTech/verify-ts-client
